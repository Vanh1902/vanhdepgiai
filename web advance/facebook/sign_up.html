<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Login</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>
    <div class="main-wrapper">
        <div class="facebook-login">
            <div class="facebook-login__content">
                <div class="facebook--text">
                    <img src="./img/dF5SId3UHWd.svg" alt="logo">
                    <p>Facebook giúp bạn kết nối và chia sẻ với mọi người trong cuộc sống của bạn.</p>
                </div>
                <div class="facebook--form">
                    <form id="form-login">
                        <input type="text" placeholder="Email hoặc số điện thoại" id="email">
                        <input type="password" placeholder="password" id="password">
                        <input type="text" placeholder="name" id="name">
                        <hr>
                        <button type = "button" style="text-align: center" onclick="sign_up()">Đăng nhập</button>
                        <p id="checkCase"></p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        function sign_up(){
            let input_email = document.getElementById("email").value;
            let input_password = document.getElementById("password").value;
            let input_name = document.getElementById("name").value;
            let caseBlock = document.getElementById("checkCase");

            let listUsers = [];
            let listPassword = [];
            let listUsername = [];
            let isAccountExist = false;
            
            
            if (JSON.parse(localStorage.getItem("listUsers") != null)){
                listUsers = JSON.parse(localStorage.getItem("listUsers"))
            }
            if( JSON.parse(localStorage.getItem("listPassword") != null)){
                listPassword = JSON.parse(localStorage.getItem("listPassword"))
            }
            if(JSON.parse(localStorage.getItem("listUsername") != null)){
                listUsername = JSON.parse(localStorage.getItem("listUsername"))
            }
            
        
            if (input_email == "" || input_name == "" || input_password == ""){
                    console.log("Error");
                    caseBlock.innerHTML = "Sign up false, please fill in all the areas";
                    caseBlock.style.color = "red"
            }
            else{
                for(let i = 0; i < listUsers.length; i++){
                    if(input_email == listUsers[i]){
                        console.log("Error");
                        caseBlock.innerHTML = "Sign up false, please fill in all the areas";
                        caseBlock.style.color = "red";
                        isAccountExist = true;
                    }
                }
                if(!isAccountExist){
                    listUsers.push(input_email);
                    listUsername.push(input_name);
                    listPassword.push(input_password);

                    localStorage.setItem("listUsers", JSON.stringify(listUsers))
                    localStorage.setItem("listPassword", JSON.stringify(listPassword))
                    localStorage.setItem("listUsername", JSON.stringify(listUsername));

                    console.log("Successful");
                    caseBlock.innerHTML = "Sign up Successful";
                    caseBlock.style.color = "green";
                    console.log("Email:", input_email);
                    console.log("Pass:", input_password);
                    console.log("Name:", input_name);
                    location.replace("./sign_in(2)")

                }
            }
        }   
        

            
    </script>
</body>
</html>